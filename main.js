(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}function o(t,e,o){return(e=r(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function r(e){var o=function(e,o){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(o)?o:String(o)}var n,u=function(){function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"_validate",(function(t){t.validity.valid?n._errorHide(t):n._errorShow(t,t.validationMessage)})),o(this,"_hasInvalidInput",(function(t){return t.some((function(t){return!t.validity.valid}))})),this._form=r,this._submitButton=r.querySelector(e.buttonSelector),this._inputSelector=Array.from(r.querySelectorAll(e.inputSelector)),this._inputError=e.errorInput,this._spanError=e.errorSpan,this._buttonError=e.errorButton}var r,n;return r=t,(n=[{key:"_errorShow",value:function(t,e){var o=this._form.querySelector("#".concat(t.id,"_error"));t.classList.add(this._inputError),o.textContent=e,o.classList.add(this._spanError)}},{key:"_errorHide",value:function(t){var e=this._form.querySelector("#".concat(t.id,"_error"));t.classList.remove(this._inputError),e.textContent="",e.classList.remove(this._spanError)}},{key:"_buttonUnDisabled",value:function(){this._submitButton.classList.remove(this._buttonError),this._submitButton.disabled=!1}},{key:"buttonDisabled",value:function(){this._submitButton.classList.add(this._buttonError),this._submitButton.disabled=!0}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputSelector)?this.buttonDisabled():this._buttonUnDisabled()}},{key:"_setEventListeners",value:function(){var t=this;this._inputSelector.forEach((function(e){e.addEventListener("input",(function(){t._validate(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){var t=this;Array.from(this._form).forEach((function(e){e.addEventListener("submit",(function(t){t.preventDefault()})),t._setEventListeners()}))}}])&&e(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(),i={errorInput:"popup__input_error",errorSpan:"task__error_visible",errorButton:"popup__confirm_disabled",inputSelector:".popup__input",buttonSelector:".popup__confirm"},a=document.querySelector(".popup__edit"),c=document.querySelector(".profile__button_edit"),l=(a.querySelector(".popup__confirm"),a.querySelector(".popup__close")),p=a.querySelector(".popup__input_name"),s=a.querySelector(".popup__input_status"),_=document.querySelector(".profile__name"),d=document.querySelector(".profile__status"),f=document.querySelector(".popup__form"),v=document.querySelector(".todo"),m=document.querySelector(".popup__add"),y=document.querySelector(".profile__button_add"),b=(document.querySelector(".popup__close-add"),document.querySelector(".popup__input_add")),S=document.querySelector(".popup-add__form"),h=(document.querySelector(".popup__title_add"),document.querySelectorAll(".popup"),document.querySelector(".popup__avatar")),q=document.querySelector(".profile__avatar"),E=document.querySelector(".popup__close-avatar"),L=document.querySelector(".popup__input_avatar"),k=document.querySelector(".popup-avatar__form"),g=(document.querySelector(".popup__confirm_avatar"),document.querySelector(".popup__confirm_change"),new u(i,f)),w=new u(i,S),D=new u(i,k);function x(t){t.classList.add("popup_is-opened")}function C(t){t.classList.remove("popup_is-opened")}function B(t){t.target.closest(".todo__block").remove()}function j(t){var e=t.target.closest(".todo__block");e.classList.toggle("todo__block_type_complete"),v.append(e)}function I(t){var e=document.querySelector("#template").content.cloneNode(!0),o=e.querySelector(".todo__text"),r=e.querySelector(".todo__button_type_edit"),n=e.querySelector(".todo__button_type_reject"),u=e.querySelector(".todo__button_type_accept");o.textContent=t,n.addEventListener("click",B),u.addEventListener("click",j),r.addEventListener("click",P),v.prepend(e)}function P(t){x(m),t.preventDefault();var e=t.target.closest(".todo__block").querySelector(".todo__text");n=e,b.value=e.textContent}function A(t){var e=document.querySelector(".popup_is-opened");t.target===e&&C(e)}g.enableValidation(),w.enableValidation(),D.enableValidation(),["Программировать","Покурить","Поесть","Поиграть"].forEach((function(t){I(t)})),a.addEventListener("mousedown",A),c.addEventListener("click",(function(){p.value=_.textContent,s.value=d.textContent,g.buttonDisabled(),x(a)})),l.addEventListener("click",(function(){C(a)})),f.addEventListener("submit",(function(t){t.preventDefault(),_.textContent=p.value,d.textContent=s.value,C(a)})),S.addEventListener("submit",(function(t){t.preventDefault();var e=b.value;n?(n.textContent=b.value,n=null):I(e),b.value="",C(m)})),y.addEventListener("click",(function(){w.buttonDisabled(),x(m)})),q.addEventListener("click",(function(){D.buttonDisabled(),x(h)})),h.addEventListener("mousedown",A),E.addEventListener("click",(function(){C(h)})),k.addEventListener("submit",(function(t){t.preventDefault(),q.src=L.value,C(h),L.value=""}))})();